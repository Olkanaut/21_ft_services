# server {
# 	listen			80 ;
# 	listen			[::]:80 ;
# 	server_name		192.168.99.231 ;

# 	return 301 https://$server_name$request_uri;
# }

# server {
# 	listen			443 ssl;
# 	listen			[::]:443 ssl;

# 	ssl_certificate		/etc/nginx/ssl/cert.crt;
# 	ssl_certificate_key	/etc/nginx/ssl/key.key;

# 	root /var/lib/nginx/html/;
# 	index index.html index.php;

# 	location / {
# 		try_files $uri $uri/ = 404;
# 	}
# }



# user                            www;
worker_processes                auto; # it will be determinate automatically by the number of core

events {
    worker_connections          1024;
}

http {
    include                     /etc/nginx/mime.types;
    default_type                application/octet-stream;
    sendfile                    on;
    access_log                  /var/log/nginx/access.log;
    keepalive_timeout           3000;

	server {
		listen			80 ;
		listen			[::]:80 ;
		server_name		192.168.99.231 ; #####
		# server_name		olololo;
		return 301 https://$server_name$request_uri;
	}

	server {
		listen			443 ssl;
		listen			[::]:443 ssl;

		ssl_certificate		/etc/nginx/ssl/cert.crt;
		ssl_certificate_key	/etc/nginx/ssl/key.key;

		root /var/lib/nginx/html/;
		# root	/www;
		index	index.html index.htm;
		rewrite ^([^.]*[^/])$ $1/ permanent;
		client_max_body_size    32m;
		error_page              500 502 503 504  /50x.html;
        location = /50x.html {
              root              /var/lib/nginx/html;
        }
        location /wordpress {
            return 307 http://192.168.99.231:5050/;
        }
    	location ~ \/phpmyadmin {
       		rewrite								^/phpmyadmin(/.*)$ $1 break;
        	proxy_set_header X-Real-IP			$remote_addr;
        	proxy_set_header X-Forwarded-For	$remote_addr;
        	proxy_set_header Host				$host;
        	proxy_set_header X-Forwarded-Proto	https;
        	proxy_pass							http://$host:5000;
    	}
    	location ~ \/index.php {
               return 301   http://$host/phpmyadmin/;
        }
	}
}


# user                            www;
# worker_processes                auto; # it will be determinate automatically by the number of core

# events {
#     worker_connections          1024;
# }

# http {
#     include                     /etc/nginx/mime.types;
#     default_type                application/octet-stream;
#     sendfile                    on;
#     access_log                  /var/log/nginx/access.log;
#     keepalive_timeout           3000;

# 	server {
# 		listen			80 ;
# 		listen			[::]:80 ;
# 		server_name		192.168.99.230 ;
# 		# server_name		olololo;
# 		return 301 https://$server_name$request_uri;
# 	}

# 	server {
# 		listen			443 ssl;
# 		listen			[::]:443 ssl;

# 		ssl_certificate		/etc/nginx/ssl/cert.crt;
# 		ssl_certificate_key	/etc/nginx/ssl/key.key;

# 		# root /var/lib/nginx/html/;
# 		root	/www;
# 		index	index.html index.htm;
# 		rewrite ^([^.]*[^/])$ $1/ permanent;
# 		client_max_body_size    32m;
# 		error_page              500 502 503 504  /50x.html;
#         location = /50x.html {
#               root              /var/lib/nginx/html;
#         }
#         location /wordpress {
#             return 307 http://192.168.99.231:5050/;
#         }
#     	location ~ \/phpmyadmin {
#        		rewrite								^/phpmyadmin(/.*)$ $1 break;
#         	proxy_set_header X-Real-IP			$remote_addr;
#         	proxy_set_header X-Forwarded-For	$remote_addr;
#         	proxy_set_header Host				$host;
#         	proxy_set_header X-Forwarded-Proto	https;
#         	proxy_pass							http://$host:5000;
#     	}
#     	location ~ \/index.php {
#                return 301   http://$host/phpmyadmin/;
#         }
# 	}
# }


# server {
#     listen       80;
#     server_name  localhost;

#     #charset koi8-r;
#     #access_log  /var/log/nginx/host.access.log  main;

#     location / {
#         root   /usr/share/nginx/html;
#         index  index.html index.htm;
#     }

#     #error_page  404              /404.html;

#     # redirect server error pages to the static page /50x.html
#     #
#     error_page   500 502 503 504  /50x.html;
#     location = /50x.html {
#         root   /usr/share/nginx/html;
#     }

#     # proxy the PHP scripts to Apache listening on 127.0.0.1:80
#     #
#     #location ~ \.php$ {
#     #    proxy_pass   http://127.0.0.1;
#     #}

#     # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
#     #
#     #location ~ \.php$ {
#     #    root           html;
#     #    fastcgi_pass   127.0.0.1:9000;
#     #    fastcgi_index  index.php;
#     #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
#     #    include        fastcgi_params;
#     #}

#     # deny access to .htaccess files, if Apache's document root
#     # concurs with nginx's one
#     #
#     #location ~ /\.ht {
#     #    deny  all;
#     #}
# }
